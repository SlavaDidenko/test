

export class Downloader {

    static get toolbox() {
        return {
            title: 'Downloader',
            icon: `
                <svg width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M8.97969 2.23988C10.4749 1.96565 12.0185 2.27023 13.2975 3.09188C14.3874 3.79207 15.2157 4.82312 15.6672 6.02478C16.2137 5.96274 16.7677 5.98272 17.3106 6.08521C18.0753 6.22953 18.8006 6.53416 19.439 6.97903C20.0774 7.4239 20.6144 7.99892 21.0145 8.66627C21.4147 9.33361 21.6689 10.0781 21.7606 10.8508C21.8523 11.6235 21.7793 12.4069 21.5464 13.1493C21.3135 13.8918 20.926 14.5765 20.4094 15.1583C19.8928 15.7402 19.2589 16.2061 18.5492 16.5254C17.8396 16.8446 17.0704 17.0099 16.2923 17.0104C15.8954 17.0107 15.5734 16.6891 15.5731 16.2922C15.5728 15.8952 15.8944 15.5732 16.2913 15.5729C16.8665 15.5725 17.435 15.4503 17.9595 15.2144C18.484 14.9784 18.9526 14.6341 19.3344 14.204C19.7162 13.7739 20.0026 13.2678 20.1748 12.7191C20.3469 12.1703 20.4009 11.5913 20.3331 11.0202C20.2654 10.4491 20.0774 9.89875 19.7817 9.4055C19.4859 8.91225 19.089 8.48723 18.6172 8.15841C18.1453 7.8296 17.6092 7.60444 17.044 7.49777C16.4823 7.39174 15.9046 7.40519 15.3484 7.53713L14.0847 7.88103C13.7017 7.98527 13.3067 7.75927 13.2025 7.37625C13.0982 6.99322 13.3242 6.59822 13.7073 6.49398L14.248 6.34683C13.8923 5.51221 13.2929 4.79747 12.5205 4.30132C11.5485 3.67687 10.3754 3.44539 9.23901 3.6538C8.10263 3.86221 7.08801 4.49493 6.40083 5.42368C5.7182 6.34629 5.40942 7.49245 5.53578 8.6326L5.53726 8.6405C5.54102 8.66019 5.54695 8.69021 5.55504 8.72828C5.57131 8.80483 5.59586 8.91168 5.62851 9.03111C5.69864 9.28762 5.78835 9.53445 5.88021 9.68118C6.09083 10.0176 5.98882 10.4612 5.65235 10.6718C5.31589 10.8824 4.87238 10.7804 4.66176 10.4439C4.5147 10.209 4.40486 9.9327 4.32549 9.68991C3.87347 9.92435 3.48237 10.2678 3.19022 10.6938C2.76065 11.3201 2.57457 12.0817 2.66695 12.8356C2.75933 13.5894 3.1238 14.2836 3.69189 14.7876C4.25973 15.2915 4.99195 15.5707 5.75108 15.573H6.70849C7.10545 15.573 7.42724 15.8948 7.42724 16.2917C7.42724 16.6887 7.10545 17.0105 6.70849 17.0105H5.75016L5.74826 17.0105C4.63847 17.0075 3.56794 16.5994 2.73782 15.8629C1.9077 15.1263 1.37511 14.112 1.24012 13.0104C1.10514 11.9088 1.37704 10.7959 2.00475 9.88069C2.51727 9.13343 3.23819 8.55997 4.07134 8.22725C4.0503 6.91744 4.45959 5.63052 5.24525 4.56867C6.14943 3.34663 7.48446 2.51411 8.97969 2.23988ZM11.5002 11.7396C11.8971 11.7396 12.2189 12.0614 12.2189 12.4583V19.5879L13.447 18.6054C13.757 18.3575 14.2093 18.4077 14.4572 18.7177C14.7052 19.0276 14.655 19.4799 14.345 19.7279L11.9492 21.6446C11.6867 21.8546 11.3137 21.8546 11.0512 21.6446L8.65533 19.7279C8.34537 19.4799 8.29511 19.0276 8.54309 18.7177C8.79106 18.4077 9.24336 18.3575 9.55333 18.6054L10.7814 19.5879V12.4583C10.7814 12.0614 11.1032 11.7396 11.5002 11.7396Z" fill="black"/>
                </svg>
            `
        };
    }

    constructor({ data, api }){

        console.log('x', data );

        this.data = {
            title: "",
            placeholder: "",
            button: "",
            fileLink: null
        }
        
        if( Object.keys(data).length > 0 ){
            this.data = data;
            this.preloaded = true;
        }

        this.render = this.render.bind(this);
    }

    render(){
        let node = document.createElement('div');

        node.innerHTML = `
            <h2> Downloader </h2>

            <div class="ce-tool__item">
                <div class="ce-tool__label">
                    Title
                </div>
                <div contenteditable="true" class="ce-tool__field _title">${this.data.title}</div>
            </div>
            <div class="ce-tool__item">
                <div class="ce-tool__label">
                    Placeholder
                </div>
                <div contenteditable="true" class="ce-tool__field _placeholder">${this.data.placeholder}</div>
            </div>
            <div class="ce-tool__item">
                <div class="ce-tool__label">
                    Button Text
                </div>
                <div contenteditable="true" class="ce-tool__field _btn_text">${this.data.button}</div>
            </div>
            <div class="ce-tool__item">
                <div class="ce-tool__label">
                    File
                </div>
                <input type="file" name="file" />

                <a href="#"> Link to File </a>
            </div>
        `;

        return node;
    }



    save(node) {
        return {
            title: node.querySelector('._title').innerHTML,
            placeholder: node.querySelector('._placeholder').innerHTML,
            button: node.querySelector('._btn_text').innerHTML,
            fileLink: null
        }
    }

}